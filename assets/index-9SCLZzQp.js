(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var $=function(e,t){return $=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},$(e,t)};function M(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var _=function(){return _=Object.assign||function(t){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_.apply(this,arguments)};function Ie(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n}function Oe(e,t,n,r){function o(i){return i instanceof n?i:new n(function(c){c(i)})}return new(n||(n=Promise))(function(i,c){function s(f){try{u(r.next(f))}catch(d){c(d)}}function a(f){try{u(r.throw(f))}catch(d){c(d)}}function u(f){f.done?i(f.value):o(f.value).then(s,a)}u((r=r.apply(e,t||[])).next())})}function ee(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=s(0),c.throw=s(1),c.return=s(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(u){return function(f){return a([u,f])}}function a(u){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(f){u=[6,f],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function O(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function A(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),o,i=[],c;try{for(;(t===void 0||t-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(s){c={error:s}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return i}function C(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,i;r<o;r++)(i||!(r in t))&&(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}function T(e){return this instanceof T?(this.v=e,this):new T(e)}function Ae(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,i=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",c),o[Symbol.asyncIterator]=function(){return this},o;function c(l){return function(m){return Promise.resolve(m).then(l,d)}}function s(l,m){r[l]&&(o[l]=function(h){return new Promise(function(P,I){i.push([l,h,P,I])>1||a(l,h)})},m&&(o[l]=m(o[l])))}function a(l,m){try{u(r[l](m))}catch(h){y(i[0][3],h)}}function u(l){l.value instanceof T?Promise.resolve(l.value.v).then(f,d):y(i[0][2],l)}function f(l){a("next",l)}function d(l){a("throw",l)}function y(l,m){l(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Pe(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof O=="function"?O(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(c){return new Promise(function(s,a){c=e[i](c),o(s,a,c.done,c.value)})}}function o(i,c,s,a){Promise.resolve(a).then(function(u){i({value:u,done:s})},c)}}function p(e){return typeof e=="function"}function Le(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var B=Le(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,o){return o+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function V(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var F=(function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,o,i;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var s=O(c),a=s.next();!a.done;a=s.next()){var u=a.value;u.remove(this)}}catch(h){t={error:h}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}else c.remove(this);var f=this.initialTeardown;if(p(f))try{f()}catch(h){i=h instanceof B?h.errors:[h]}var d=this._finalizers;if(d){this._finalizers=null;try{for(var y=O(d),l=y.next();!l.done;l=y.next()){var m=l.value;try{H(m)}catch(h){i=i??[],h instanceof B?i=C(C([],A(i)),A(h.errors)):i.push(h)}}}catch(h){r={error:h}}finally{try{l&&!l.done&&(o=y.return)&&o.call(y)}finally{if(r)throw r.error}}}if(i)throw new B(i)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)H(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&V(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&V(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=(function(){var t=new e;return t.closed=!0,t})(),e})();F.EMPTY;function te(e){return e instanceof F||e&&"closed"in e&&p(e.remove)&&p(e.add)&&p(e.unsubscribe)}function H(e){p(e)?e():e.unsubscribe()}var _e={Promise:void 0},Ce={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,C([e,t],A(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function ne(e){Ce.setTimeout(function(){throw e})}function Q(){}function ke(e){e()}var U=(function(e){M(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,te(n)&&n.add(r)):r.destination=$e,r}return t.create=function(n,r,o){return new R(n,r,o)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t})(F),je=(function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){L(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){L(r)}else L(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){L(n)}},e})(),R=(function(e){M(t,e);function t(n,r,o){var i=e.call(this)||this,c;return p(n)||!n?c={next:n??void 0,error:r??void 0,complete:o??void 0}:c=n,i.destination=new je(c),i}return t})(U);function L(e){ne(e)}function Be(e){throw e}var $e={closed:!0,next:Q,error:Be,complete:Q};function g(e,t,n,r,o){return new Re(e,t,n,r,o)}var Re=(function(e){M(t,e);function t(n,r,o,i,c,s){var a=e.call(this,n)||this;return a.onFinalize=c,a.shouldUnsubscribe=s,a._next=r?function(u){try{r(u)}catch(f){n.error(f)}}:e.prototype._next,a._error=i?function(u){try{i(u)}catch(f){n.error(f)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=o?function(){try{o()}catch(u){n.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,a}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t})(U),q=(function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"})();function re(e){return e}function Me(e){return e.length===0?re:e.length===1?e[0]:function(n){return e.reduce(function(r,o){return o(r)},n)}}var b=(function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var o=this,i=Ue(t)?t:new R(t,n,r);return ke(function(){var c=o,s=c.operator,a=c.source;i.add(s?s.call(i,a):a?o._subscribe(i):o._trySubscribe(i))}),i},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=J(n),new n(function(o,i){var c=new R({next:function(s){try{t(s)}catch(a){i(a),c.unsubscribe()}},error:i,complete:o});r.subscribe(c)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[q]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Me(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=J(t),new t(function(r,o){var i;n.subscribe(function(c){return i=c},function(c){return o(c)},function(){return r(i)})})},e.create=function(t){return new e(t)},e})();function J(e){var t;return(t=e??_e.Promise)!==null&&t!==void 0?t:Promise}function Fe(e){return e&&p(e.next)&&p(e.error)&&p(e.complete)}function Ue(e){return e&&e instanceof U||Fe(e)&&te(e)}var Y=(function(e){return e&&typeof e.length=="number"&&typeof e!="function"});function oe(e){return p(e?.then)}function ie(e){return p(e[q])}function ce(e){return Symbol.asyncIterator&&p(e?.[Symbol.asyncIterator])}function ue(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function qe(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var ae=qe();function se(e){return p(e?.[ae])}function fe(e){return Ae(this,arguments,function(){var n,r,o,i;return ee(this,function(c){switch(c.label){case 0:n=e.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,T(n.read())];case 3:return r=c.sent(),o=r.value,i=r.done,i?[4,T(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,T(o)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function le(e){return p(e?.getReader)}function w(e){if(e instanceof b)return e;if(e!=null){if(ie(e))return Ye(e);if(Y(e))return Ge(e);if(oe(e))return Ve(e);if(ce(e))return pe(e);if(se(e))return He(e);if(le(e))return Qe(e)}throw ue(e)}function Ye(e){return new b(function(t){var n=e[q]();if(p(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function Ge(e){return new b(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function Ve(e){return new b(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,ne)})}function He(e){return new b(function(t){var n,r;try{for(var o=O(e),i=o.next();!i.done;i=o.next()){var c=i.value;if(t.next(c),t.closed)return}}catch(s){n={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}t.complete()})}function pe(e){return new b(function(t){Je(e,t).catch(function(n){return t.error(n)})})}function Qe(e){return pe(fe(e))}function Je(e,t){var n,r,o,i;return Oe(this,void 0,void 0,function(){var c,s;return ee(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=Pe(e),a.label=1;case 1:return[4,n.next()];case 2:if(r=a.sent(),!!r.done)return[3,4];if(c=r.value,t.next(c),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=a.sent(),o={error:s},[3,11];case 6:return a.trys.push([6,,9,10]),r&&!r.done&&(i=n.return)?[4,i.call(n)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(o)throw o.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function Ke(e,t){t===void 0&&(t={});var n=t.selector,r=Ie(t,["selector"]);return new b(function(o){var i=new AbortController,c=i.signal,s=!0,a=r.signal;if(a)if(a.aborted)i.abort();else{var u=function(){c.aborted||i.abort()};a.addEventListener("abort",u),o.add(function(){return a.removeEventListener("abort",u)})}var f=_(_({},r),{signal:c}),d=function(y){s=!1,o.error(y)};return fetch(e,f).then(function(y){n?w(n(y)).subscribe(g(o,void 0,function(){s=!1,o.complete()},d)):(s=!1,o.next(y),o.complete())}).catch(d),function(){s&&i.abort()}})}function ze(e){return p(e?.lift)}function E(e){return function(t){if(ze(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}var De=new b(function(e){return e.complete()});function Xe(e){return e&&p(e.schedule)}function de(e){return e[e.length-1]}function he(e){return Xe(de(e))?e.pop():void 0}function Ze(e,t){return typeof de(e)=="number"?e.pop():t}function S(e,t,n,r,o){r===void 0&&(r=0),o===void 0&&(o=!1);var i=t.schedule(function(){n(),o?e.add(this.schedule(null,r)):this.unsubscribe()},r);if(e.add(i),!o)return i}function ye(e,t){return t===void 0&&(t=0),E(function(n,r){n.subscribe(g(r,function(o){return S(r,e,function(){return r.next(o)},t)},function(){return S(r,e,function(){return r.complete()},t)},function(o){return S(r,e,function(){return r.error(o)},t)}))})}function ve(e,t){return t===void 0&&(t=0),E(function(n,r){r.add(e.schedule(function(){return n.subscribe(r)},t))})}function Ne(e,t){return w(e).pipe(ve(t),ye(t))}function We(e,t){return w(e).pipe(ve(t),ye(t))}function et(e,t){return new b(function(n){var r=0;return t.schedule(function(){r===e.length?n.complete():(n.next(e[r++]),n.closed||this.schedule())})})}function tt(e,t){return new b(function(n){var r;return S(n,t,function(){r=e[ae](),S(n,t,function(){var o,i,c;try{o=r.next(),i=o.value,c=o.done}catch(s){n.error(s);return}c?n.complete():n.next(i)},0,!0)}),function(){return p(r?.return)&&r.return()}})}function me(e,t){if(!e)throw new Error("Iterable cannot be null");return new b(function(n){S(n,t,function(){var r=e[Symbol.asyncIterator]();S(n,t,function(){r.next().then(function(o){o.done?n.complete():n.next(o.value)})},0,!0)})})}function nt(e,t){return me(fe(e),t)}function rt(e,t){if(e!=null){if(ie(e))return Ne(e,t);if(Y(e))return et(e,t);if(oe(e))return We(e,t);if(ce(e))return me(e,t);if(se(e))return tt(e,t);if(le(e))return nt(e,t)}throw ue(e)}function be(e,t){return t?rt(e,t):w(e)}function K(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=he(e);return be(e,n)}function v(e,t){return E(function(n,r){var o=0;n.subscribe(g(r,function(i){r.next(e.call(t,i,o++))}))})}var ot=Array.isArray;function it(e,t){return ot(t)?e.apply(void 0,C([],A(t))):e(t)}function ct(e){return v(function(t){return it(e,t)})}function ut(e,t,n,r,o,i,c,s){var a=[],u=0,f=0,d=!1,y=function(){d&&!a.length&&!u&&t.complete()},l=function(h){return u<r?m(h):a.push(h)},m=function(h){u++;var P=!1;w(n(h,f++)).subscribe(g(t,function(I){t.next(I)},function(){P=!0},void 0,function(){if(P)try{u--;for(var I=function(){var j=a.shift();c||m(j)};a.length&&u<r;)I();y()}catch(j){t.error(j)}}))};return e.subscribe(g(t,l,function(){d=!0,y()})),function(){}}function G(e,t,n){return n===void 0&&(n=1/0),p(t)?G(function(r,o){return v(function(i,c){return t(r,i,o,c)})(w(e(r,o)))},n):(typeof t=="number"&&(n=t),E(function(r,o){return ut(r,o,e,n)}))}function at(e){return e===void 0&&(e=1/0),G(re,e)}var st=["addListener","removeListener"],ft=["addEventListener","removeEventListener"],lt=["on","off"];function x(e,t,n,r){if(p(n)&&(r=n,n=void 0),r)return x(e,t,n).pipe(ct(r));var o=A(ht(e)?ft.map(function(s){return function(a){return e[s](t,a,n)}}):pt(e)?st.map(z(e,t)):dt(e)?lt.map(z(e,t)):[],2),i=o[0],c=o[1];if(!i&&Y(e))return G(function(s){return x(s,t,n)})(w(e));if(!i)throw new TypeError("Invalid event target");return new b(function(s){var a=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return s.next(1<u.length?u:u[0])};return i(a),function(){return c(a)}})}function z(e,t){return function(n){return function(r){return e[n](t,r)}}}function pt(e){return p(e.addListener)&&p(e.removeListener)}function dt(e){return p(e.on)&&p(e.off)}function ht(e){return p(e.addEventListener)&&p(e.removeEventListener)}function yt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=he(e),r=Ze(e,1/0),o=e;return o.length?o.length===1?w(o[0]):at(r)(be(o,n)):De}function vt(e,t){return E(function(n,r){var o=0;n.subscribe(g(r,function(i){return e.call(t,i,o++)&&r.next(i)}))})}function ge(e){return E(function(t,n){var r=null,o=!1,i;r=t.subscribe(g(n,void 0,void 0,function(c){i=w(e(c,ge(e)(t))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function mt(e,t,n,r,o){return function(i,c){var s=n,a=t,u=0;i.subscribe(g(c,function(f){var d=u++;a=s?e(a,f,d):(s=!0,f),c.next(a)},o))}}function bt(e,t){return E(mt(e,t,arguments.length>=2,!0))}function k(e,t){return E(function(n,r){var o=null,i=0,c=!1,s=function(){return c&&!o&&r.complete()};n.subscribe(g(r,function(a){o?.unsubscribe();var u=0,f=i++;w(e(a,f)).subscribe(o=g(r,function(d){return r.next(t?t(a,d,f,u++):d)},function(){o=null,s()}))},function(){c=!0,s()}))})}const we=e=>e.json(),gt=e=>`https://en.wikipedia.org/w/api.php?action=query&list=search&format=json&srsearch=${e}&srlimit=1&srprop=snippet&origin=*`,wt=e=>{const t=[...e];for(let n=t.length-1;n>0;n--){const r=Math.floor(Math.random()*(n+1));[t[n],t[r]]=[t[r],t[n]]}return t},D=["random","default","ai-relevant"],xt={topics:[],pref:"default",limit:100};class X{constructor(t){this.limit=t}apply(t){return{...t,limit:this.limit}}}class Z{constructor(t){this.pref=t}apply(t){return{...t,pref:this.pref}}}class Et{constructor(t){this.rootTopic=t}apply(t){return{...t,currTopic:0,topics:[this.rootTopic]}}}class St{constructor(t,n){this.newTopic=t,this.currTopicIndex=n}apply(t){return{...t,currTopic:this.currTopicIndex+1,topics:t.topics.slice(0,this.currTopicIndex+1).concat(this.newTopic)}}}class xe{constructor(t){this.changeAmount=t}apply(t){if(t.currTopic===void 0)return t;const r=t.currTopic+this.changeAmount>=0&&t.currTopic+this.changeAmount<=t.topics.length-1?t.currTopic+this.changeAmount:t.currTopic;return{...t,currTopic:r}}}const Tt=document.getElementById("inputTopic"),It=document.getElementsByClassName("topicText")[0],Ot=document.getElementById("btnExploreTopic"),At=document.getElementById("btnBack"),Pt=document.getElementById("btnForward"),Lt=document.getElementById("subtopicContainer"),N=document.getElementById("order"),W=document.getElementById("inputSubtopicLimit"),_t=x(W,"input").pipe(v(e=>{const t=parseInt(W.value);return t>0?new X(t):new X(100)})),Ct=x(N,"change").pipe(v(e=>{const t=N.value;return D.includes(t)?new Z(t):new Z(D[0])})),kt=x(At,"click").pipe(v(e=>new xe(-1))),jt=x(Pt,"click").pipe(v(e=>new xe(1))),Bt=x(Lt,"click").pipe(vt(e=>e.target.tagName.toLowerCase()==="p"),v(e=>e.target.textContent),v(e=>[It.id,e]),k(([e,t])=>Ee(t).pipe(v(n=>[parseInt(e),{title:t,subtopics:n}]))),v(([e,t])=>new St(t,e))),$t=x(Ot,"click").pipe(v(e=>Tt.value),k(e=>Se(gt(e),we)),v(e=>e.query.search[0].title),k(e=>Ee(e).pipe(v(t=>({title:e,subtopics:t})))),v(e=>new Et(e))),Ee=e=>Se(`https://en.wikipedia.org/w/api.php?action=query&format=json&titles=${e}&prop=links&pllimit=max&origin=*`,we).pipe(v(t=>{const n=t.query.pages;return n[Object.keys(n)[0]].links?.map(o=>o.title)??[]})),Se=(e,t)=>Ke(e).pipe(k(n=>n.ok?t(n):K({error:!0,message:`Error ${n.status}`})),ge(n=>(console.error(n),K({error:!0,message:n.message})))),Rt=e=>{const t=document.getElementById("topicContainer"),n=document.getElementById("subtopicContainer"),r=document.getElementsByClassName("topicText")[0],o=document.getElementById("stps"),i=document.getElementById("stepsAway"),c=document.getElementById("order");e.currTopic!==void 0&&(t.style.visibility="visible",o.style.visibility="visible",c.style.visibility="visible"),i.textContent=`${e.currTopic}`,r.textContent=e.topics[e.currTopic].title,r.id=`${e.currTopic}`;{n.innerHTML="";const s=e.topics[e.currTopic];(e.pref==="random"?wt(s.subtopics):s.subtopics).slice(0,e.limit).map(d=>{const y=document.createElement("p");return y.id=d,y.textContent=d,y}).forEach(d=>{n.appendChild(d)})}},Mt=document.getElementById("inputTopic");document.getElementsByClassName("topicText")[0];const Ft=document.getElementById("btnExploreTopic"),Ut=yt($t,Bt,kt,jt,Ct,_t),Te=Ut.pipe(bt((e,t)=>t.apply(e),xt));Te.subscribe(e=>Rt(e));x(Ft,"click").subscribe(e=>{Mt.value=""});Te.subscribe(console.log);
